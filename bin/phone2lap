#!/bin/zsh

#
#   This is to move pics from the phone to the laptop
#

SRC=/media/disk/DCIM/102NIKON
DST=/home/justin/Pictures
TXLIST="${SRC}/transfered_list"

NEWDATE=`date +%F`

if [ ! -d "${DST}/${NEWDATE}" ]; then
	mkdir -p "${DST}/${NEWDATE}"
fi

cd $SRC || exit 1

if [ -f $TXLIST ]; then
    tar -cpf - -X $TXLIST *.JPG | ( cd "$DST/$NEWDATE" ; tar -xvpf - ) || exit 1
else
    tar -cpf - *.JPG | ( cd "$DST/$NEWDATE" ; tar -xvpf - ) || exit 1
fi

cd "$DST/$NEWDATE" || exit 1

for PIC in *JPG ; do
	echo ${PIC:t} >> $TXLIST || exit 1
done

