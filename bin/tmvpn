#!/bin/bash

read -p "PASSWORD: " -s VPNPW

docker run \
	--rm \
	--interactive \
	--tty \
	-p 127.0.0.1:5001:5001 \
	-p 127.0.0.1:5006:5006 \
	-p 127.0.0.1:5007:5007 \
	-p 127.0.0.1:5053:5053 \
	-p 127.0.0.1:5054:5054 \
	--name tmvpn \
	--network=bridge \
	--cap-add=NET_ADMIN \
	jhoppensteadt/openconnect $VPNPW


#openconnect --dump-http-traffic \
#    -c ~/.cisco/certificates/client/private/bothkeys.pem \
#    -k ~/.cisco/certificates/client/private/client.key \
#    --cafile /etc/ssl/certs/ca-certificates.crt \
#    -v \
#    --os=win \
#    --script-tun \
#    --script "ocproxy \
#                -D 5000 \
#                -L 5001:jump.ash.syseng.tmcs:22 \
#                -L 5002:cas-na.lyv.livenation.com:993 \
#                -L 5003:in-smtp.livenation.com:25 \
#                -L 5004:in-smtp.livenation.com:465 \
#                -L 5005:cas-na.lyv.livenation.com:587 \
#                -L 5006:git.tm.tmcs:22 \
#                -L 5007:git.tm.tmcs:443 \
#                -L 5053:10.75.32.5:53 \
#                -L 5054:10.75.33.5:53 \
#                --dns 10.75.32.5 \
#                --dns 10.75.33.5 \
#                --domain websys.tmcs" \
#    asg.ticketmaster.com
