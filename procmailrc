#Preliminaries
VERBOSE=no
SHELL=/bin/bash               #Use the Bourne shell (check your path!)
MAILDIR=${HOME}/Maildir            #First check what your mail directory is!
DEFAULT=${MAILDIR}/
LOGFILE=${MAILDIR}/procmail.log
LOG="--- Logging ${LOGFILE} for ${LOGNAME}, "

REC=`formail -xTo | tr -d "<" | tr -d ">"| tr -d " "|tr "." "_"`


##
#   Remove Duplicates, from procmailex

#:0 Wh: msgid.lock
#| formail -D 8192 msgid.cache

##
#   Handle Spam

:0
* ^To:.*(cybererotica|therave|teenybopper|bomb|brazzers|deluxe)
/dev/null

:0fw
*
| /usr/bin/spamc 

:0
* ^X-Spam-Status: Yes
| /usr/libexec/dovecot/deliver -m Junk

:0
* ^Subject:.*\[SPAM\]
| /usr/libexec/dovecot/deliver -m Junk


##
#   Message Sorting
#

# Sports
:0
* ^(To: .*kickball|From:.*worldkickball.com)
| /usr/libexec/dovecot/deliver -m INBOX.sports

# Ebay
:0
* ^From:.*ebay.com
| mailpipe.pl -from=ebay@525sports.com | /usr/libexec/dovecot/deliver -m INBOX.ebay

# Yahoo Account
:0
* justin_hoppensteadt@yahoo.com
| /usr/libexec/dovecot/deliver -m INBOX.Justin_Hoppensteadt@Yahoo_com

# Universal Music Group
0:
* universal@justinhoppensteadt.com
| /usr/libexec/dovecot/deliver -m INBOX.universal

# Universal eCRM Testing
:0
* ^To:.*test.*@justinhoppensteadt.com
{
#    EXITCODE=100
#    :0 Wi
#    * ^To: test(1.*|2|3|4|5)@justinhoppensteadt.com
#    | /var/qmail/bin/bouncesaying 'Bouncy Bouncy'

    :0
    | /usr/libexec/dovecot/deliver -m INBOX.test
}

# Buzznet
:0:
* (buzznet@justinhoppensteadt.com|.*@buzznet.com)
{
    :0
    * ^From:.*(Cron Daemon|root@|@keynote.com|DenyHosts|donotreply@llnw.com|logwatch@idx1.buzznet.com|Arpwatch|nagios@tools|@iggy.fringehead.org|@pingdom|noreply@akamai.com)
    | /home/justin/bin/mail2rss.pl | /usr/libexec/dovecot/deliver -m INBOX.buzznet.monitoring

    :0
    * ^From:.*cfengine@.*
    | /usr/libexec/dovecot/deliver -m INBOX.buzznet.cfengine

    :0
    * ^From:.*mantis@buzznet.com
    | /usr/libexec/dovecot/deliver -m INBOX.buzznet.mantis

    :0
    * ^Subject: (www|cfengine|justjared|JJDEPLOY).*(files|).*DEPLOYED
    | /usr/libexec/dovecot/deliver -m INBOX.buzznet.deploy

    :0
    * ^Reply-To: blogops@buzznet.com
    | /usr/libexec/dovecot/deliver -m INBOX.buzznet.tickets

    :0
    | /usr/libexec/dovecot/deliver -m INBOX.buzznet
}

# System Messages
:0
* ^From: DenyHosts
| /usr/libexec/dovecot/deliver -m INBOX.messages

:0
* ^(Subject|From):.*(root|cron)
| /usr/libexec/dovecot/deliver -m INBOX.messages

:0
* ^From: .*facebook.*.com
| /usr/libexec/dovecot/deliver -m INBOX.facebook@justinhoppensteadt_com

:0
* ^(To:.*match@root|From: .*(@talkmatch.com|connect.match.com))
| /usr/libexec/dovecot/deliver -m INBOX.match@root-squash_ath_cx



##
#   Catch-alls
:0
* ? test -d "/home/justin/Maildir/.INBOX.${REC}"
| /usr/libexec/dovecot/deliver -m INBOX.${REC}

:0E:
| /usr/libexec/dovecot/deliver -m INBOX
